{% extends "base.html" %}

{% block title %}Home – Healthcare Integration Demo{% endblock %}

{% block content %}
<!-- Hero / Story -->
<div class="row mb-5">
  <div class="col-lg-9">
    <h1 class="mb-2">Healthcare Integration Analyst Demo</h1>
    <div class="text-muted">
      HL7 v2 → FHIR R4 → X12 (837/835) • Validation • Traceability • Reconciliation
    </div>

    <p class="lead">
      This demo represents a simplified but realistic healthcare integration environment.

        It is designed to showcase how an Integration Analyst:
        - Receives and analyzes HL7 messages
        - Validates transformations
        - Traces issues across systems
        - Communicates technical findings clearly


    </p>

    <p class="lead">
      In real healthcare systems, data rarely fails because of a single bug.
      It fails because messages move across <strong>formats, vendors, protocols,
      and responsibilities</strong>.
    </p>

    <p class="lead">
      This demo models that reality by tracing a single message as it moves through:
      <strong>HL7 v2 → FHIR R4 → X12 (837 / 835)</strong>,
      with full observability, validation, and auditability.
    </p>

    <p class="text-muted">
      The goal is not just transformation, but <strong>traceability</strong>:
      answering questions like <em>“What happened?”</em>,
      <em>“Where did it fail?”</em>, and
      <em>“Can we prove it later?”</em>
    </p>
  </div>
</div>

<!-- Why this matters -->
<div class="row mb-4">
  <div class="col-lg-10">
    <div class="alert alert-secondary">
      <strong>Why this matters:</strong>
      In production healthcare integrations, analysts and architects must debug
      message flows involving EHRs, clearinghouses, and payers — often days or weeks
      after the original transaction occurred.
      <br><br>
      This demo focuses on the skills required to operate those systems,
      not just build them.
    </div>
  </div>
</div>

<!-- KPI Strip -->
<div class="row mb-4">
  <div class="col-lg-10">
    <div class="card">
      <div class="card-body d-flex flex-wrap gap-2">
        <span class="badge text-bg-secondary">HL7 logs: {{ total }}</span>
        <span class="badge text-bg-secondary">Trace logs: {{ trace_total }}</span>
        <span class="badge text-bg-danger">Trace errors: {{ trace_errors }}</span>
        <span class="badge text-bg-warning text-dark">Review required: {{ trace_review_required }}</span>
        {% if latest_trace_id %}
          <span class="badge text-bg-primary">Latest Trace: {{ latest_trace_id }}</span>
        {% endif %}
      </div>
    </div>
  </div>
</div>


<!-- Capabilities -->
<div class="row g-4 mb-5">
  <!-- HL7 Playground -->
  <div class="col-md-3">
    <div class="card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">HL7 Playground</h5>
        <p class="card-text">
          Start at the source.
          Paste real-world HL7 v2 messages (ADT / ORM / ORU) and observe how they
          are parsed, validated, and prepared for downstream transformation.
        </p>
        <p class="small text-muted">
          This simulates data arriving from hospital EHR systems.
        </p>
        <div class="mt-auto">
          <a href="{% url 'hl7-playground' %}" class="btn btn-primary btn-sm">
            Open HL7 Playground
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Mirth -->
  <div class="col-md-3">
    <div class="card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">Mirth Live Feed</h5>
        <p class="card-text">
          View messages delivered through
          <strong>Mirth Connect channels</strong>,
          simulating real interface engines used by hospitals and labs.
        </p>
        <p class="small text-muted">
          Shows how messages arrive asynchronously and are handed off to APIs.
        </p>
        <div class="mt-auto">
          <a href="{% url 'mirth-messages' %}" class="btn btn-outline-primary btn-sm">
            View Mirth Messages
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Traceability -->
  <div class="col-md-3">
    <div class="card h-100 border-primary">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">Traceability & Audit</h5>
        <p class="card-text">
          Every inbound payload generates a <strong>Trace ID</strong>.
          Processing steps, validation outcomes, transformation decisions,
          and errors are recorded in sequence.
        </p>
        <p class="small text-muted">
          This reflects how integration analysts investigate production issues.
        </p>
        <div class="mt-auto">
          <a href="{% url 'trace-logs-page' %}" class="btn btn-primary btn-sm">
            View Trace Logs
          </a>
          <a href="{% url 'trace-logs-page' %}?review_required=1" class="btn btn-outline-danger btn-sm mt-2">
            Exceptions Dashboard
          </a>

        </div>
      </div>
    </div>
  </div>

  <!-- CSV Import -->
  <div class="col-md-3">
    <div class="card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">CSV Import + Reconciliation</h5>
        <p class="card-text">
          Upload a Patients CSV to simulate real-world migrations:
          schema validation, normalization, dedupe, and upsert into the database.
        </p>
        <p class="small text-muted">
          Includes reconciliation summary and downloadable rejects CSV.
        </p>
        <div class="mt-auto">
          <a href="{% url 'patient-import' %}" class="btn btn-outline-primary btn-sm">
            Open CSV Import
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- How to evaluate -->
<div class="row mb-5">
  <div class="col-lg-10">
    <h3>How to evaluate this demo (60 seconds)</h3>
    <ol class="text-muted">
      <li>Start with <strong>HL7 Playground</strong>: paste ADT/ORU and validate.</li>
      <li>Open <strong>Mirth Live Feed</strong>: see message arrival and status.</li>
      <li>Go to <strong>Trace Logs</strong>: investigate steps, WARN/ERROR, and outcomes.</li>
      <li>Try <strong>CSV Import</strong>: simulate data migration + reconciliation.</li>
    </ol>
  </div>
</div>


<!-- Architecture explanation -->
<div class="row mb-5">
  <div class="col-lg-10">
    <h3>How this demo is designed</h3>
    <ul class="text-muted">
      <li>
        <strong>Ingress-first design:</strong>
        All entry points (HL7 UI, Mirth, API) feed a shared trace pipeline.
      </li>
      <li>
        <strong>System observability:</strong>
        Failures are captured as data, not just logs.
      </li>
      <li>
        <strong>Analyst-friendly UI:</strong>
        Built to support investigation, not just development.
      </li>
      <li>
        <strong>Modern stack:</strong>
        Django REST Framework, Postgres, JWT/HMAC security, and container-ready patterns.
      </li>
    </ul>
  </div>
</div>

<!-- Compliance -->
<div class="row">
  <div class="col-lg-10">
    <div class="alert alert-warning small">
      <strong>Compliance Notice:</strong>
      This demo uses synthetic data only.
      No real PHI is stored or processed.
      The system is designed for learning, demonstration,
      and portfolio evaluation purposes.
    </div>
  </div>
</div>
{% endblock %}
